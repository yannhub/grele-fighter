# Configuration pour PWA
<IfModule mod_mime.c>
    AddType application/manifest+json .webmanifest .json
</IfModule>

# Configuration du cache pour les ressources statiques
<IfModule mod_expires.c>
    ExpiresActive On
    
    # Images
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
    
    # CSS et JS
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
    
    # Manifeste et Service Worker (cache court pour les mises à jour)
    ExpiresByType application/manifest+json "access plus 1 day"
    
    # HTML
    ExpiresByType text/html "access plus 1 day"
</IfModule>

# Headers pour PWA
<IfModule mod_headers.c>
    # Service Worker doit être servi avec le bon MIME type
    <FilesMatch "sw\.js$">
        Header set Content-Type "application/javascript"
        Header set Cache-Control "no-cache, no-store, must-revalidate"
    </FilesMatch>
    
    # Manifeste
    <FilesMatch "manifest\.json$">
        Header set Content-Type "application/manifest+json"
    </FilesMatch>
</IfModule>

# Gestion des erreurs pour les PWA
ErrorDocument 404 /index.html
